{"ast":null,"code":"import{getCode,getName}from'../utils/common';import React,{useState,useEffect}from'react';import TextInput from'../components/commons/baseText';import{excelDownload}from'../utils/common';import Excel from'../assets/images/uxicon-excel.png';import SearchIcon from'../assets/images/search.svg';import axiosInstance from'../api/axiosInstans';import dayjs from'dayjs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Search(_ref){let{type,count,data,setData}=_ref;const today=dayjs().format('YYYY-MM-DD');const[cmpk,setCmpk]=useState('');const[cName,setCname]=useState('');const[cCell,setCcell]=useState('');const[cJumin,setCjumin]=useState('');const[toDate,setToDate]=useState(dayjs().subtract(7,'day').format('YYYY-MM-DD'));const[fromDate,setFromDate]=useState(today);const fetchData=async()=>{try{let bpk=getCode(type);let param={bpk:bpk,cmpk:cmpk,cName:cName,cCell:cCell,cJumin:cJumin,toDate:toDate,fromDate:fromDate};const result=await axiosInstance.post('/searchData',param);setData(result);if(result.length<=0){alert(\"데이터가 없습니다.\");}}catch(error){console.error('Error fetching data:',error);}};const onClickHandler=e=>{fetchData();};useEffect(()=>{console.log('@@');fetchData();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"pl-[90px] w-full mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-[1440px] px-4 \",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:getName(type)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"basis-1/3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uCD1D : \",count,\"\\uAC74\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"basis-2/3 flex_center\",children:[/*#__PURE__*/_jsx(TextInput,{classnames:'w-[120px]',text:'고객키',value:cmpk,onChange:e=>setCmpk(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{classnames:'w-[120px]',text:'핸드폰',value:cCell,onChange:e=>setCcell(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{classnames:'w-[100px]',text:'생년월일',value:cJumin,onChange:e=>setCjumin(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{classnames:'w-[60px]',text:'이름',value:cName,onChange:e=>setCname(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_center\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"w-[60px] text-center mx-1\",children:\"\\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 text_input\",type:'date',defaultValue:toDate,onChange:e=>setToDate(e.target.value)}),/*#__PURE__*/_jsx(\"h2\",{className:\"mx-2\",children:\"~\"}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 text_input\",type:'date',defaultValue:fromDate,onChange:e=>setFromDate(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 border flex_center w-[30px] h-[30px] rounded-lg\",children:/*#__PURE__*/_jsx(\"button\",{className:\"outline-none\",onClick:onClickHandler,children:/*#__PURE__*/_jsx(\"img\",{src:SearchIcon,alt:'search',width:20})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-8\",children:/*#__PURE__*/_jsx(\"button\",{onClick:event=>excelDownload(getName(type),data),children:/*#__PURE__*/_jsx(\"img\",{src:Excel,alt:'excel',width:40})})})]})]})]})});}","map":{"version":3,"names":["getCode","getName","React","useState","useEffect","TextInput","excelDownload","Excel","SearchIcon","axiosInstance","dayjs","jsx","_jsx","jsxs","_jsxs","Search","_ref","type","count","data","setData","today","format","cmpk","setCmpk","cName","setCname","cCell","setCcell","cJumin","setCjumin","toDate","setToDate","subtract","fromDate","setFromDate","fetchData","bpk","param","result","post","length","alert","error","console","onClickHandler","e","log","className","children","classnames","text","value","onChange","target","defaultValue","onClick","src","alt","width","event"],"sources":["D:/IdeaProjects/admin/src/components/search.tsx"],"sourcesContent":["import {getCode, getName} from '../utils/common';\r\nimport React, { SetStateAction, useState, useEffect } from 'react';\r\nimport TextInput from '../components/commons/baseText';\r\nimport {excelDownload} from '../utils/common';\r\nimport Excel from '../assets/images/uxicon-excel.png';\r\nimport {Person} from '../@types/common';\r\nimport SearchIcon from '../assets/images/search.svg';\r\nimport axiosInstance from '../api/axiosInstans';\r\nimport dayjs from 'dayjs';\r\ninterface Props {\r\n    type : string,\r\n    count : number,\r\n    data : Person[],\r\n    setData : React.Dispatch<SetStateAction<Person[]>>\r\n}\r\n\r\ninterface Param {\r\n    [key: string]: string;\r\n}\r\nexport default function Search({type, count, data, setData} : Props){\r\n    const today = dayjs().format('YYYY-MM-DD');\r\n    const [cmpk, setCmpk] = useState('');\r\n    const [cName, setCname] = useState('');\r\n    const [cCell, setCcell] = useState('');\r\n    const [cJumin, setCjumin] = useState('');\r\n    const [toDate, setToDate] = useState(dayjs().subtract(7, 'day').format('YYYY-MM-DD'));\r\n    const [fromDate, setFromDate] = useState(today);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            let bpk = getCode(type);\r\n            let param : Param = {\r\n                bpk : bpk,\r\n                cmpk : cmpk,\r\n                cName : cName,\r\n                cCell : cCell,\r\n                cJumin : cJumin,\r\n                toDate: toDate,\r\n                fromDate: fromDate\r\n            }\r\n            const result: any = await axiosInstance.post('/searchData',param);\r\n            setData(result);\r\n            if(result.length <= 0 ){\r\n                alert(\"데이터가 없습니다.\")\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    };\r\n\r\n    const onClickHandler = (e: React.MouseEvent) => {\r\n\r\n        fetchData();\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log('@@')\r\n        fetchData();\r\n    }, []);\r\n    return (\r\n        <div className='pl-[90px] w-full mt-8'>\r\n            <div className='min-w-[1440px] px-4 '>\r\n                <p className='font-bold'>{getName(type)}</p>\r\n                <div className='flex w-full'>\r\n                    <div className='basis-1/3'>\r\n                        <p>총 : {count}건</p>\r\n                    </div>\r\n                    <div className='basis-2/3 flex_center'>\r\n                        <TextInput\r\n                            classnames={'w-[120px]'}\r\n                            text={'고객키'}\r\n                            value={cmpk}\r\n                            onChange={(e) => setCmpk(e.target.value)}\r\n                        />\r\n                        <TextInput\r\n                            classnames={'w-[120px]'}\r\n                            text={'핸드폰'}\r\n                            value={cCell}\r\n                            onChange={(e) => setCcell(e.target.value)}\r\n                        />\r\n                        <TextInput\r\n                            classnames={'w-[100px]'}\r\n                            text={'생년월일'}\r\n                            value={cJumin}\r\n                            onChange={(e) => setCjumin(e.target.value)}\r\n                        />\r\n                        <TextInput\r\n                            classnames={'w-[60px]'}\r\n                            text={'이름'}\r\n                            value={cName}\r\n                            onChange={(e) => setCname(e.target.value)}\r\n                        />\r\n                        <div className='flex_center'>\r\n                            <label className='w-[60px] text-center mx-1'>\r\n                                날짜\r\n                            </label>\r\n                            <input className='px-2 text_input' type={'date'} defaultValue={toDate}\r\n                                   onChange={(e: React.ChangeEvent<HTMLInputElement>) => setToDate(e.target.value)}/>\r\n                            <h2 className='mx-2'>~</h2>\r\n                            <input className='px-2 text_input' type={'date'} defaultValue={fromDate}\r\n                                   onChange={(e: React.ChangeEvent<HTMLInputElement>) => setFromDate(e.target.value)}/>\r\n                        </div>\r\n                        <div className='ml-4 border flex_center w-[30px] h-[30px] rounded-lg'>\r\n                            <button className='outline-none' onClick={onClickHandler}>\r\n                            <img src={SearchIcon} alt={'search'} width={20}/>\r\n                            </button>\r\n                        </div>\r\n                        <div className='mx-8'>\r\n                            <button\r\n                                onClick={(event: React.MouseEvent<HTMLButtonElement>) => excelDownload(getName(type), data)}>\r\n                                <img src={Excel} alt={'excel'} width={40}/>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}