{"ast":null,"code":"import cn from\"classnames\";import React,{useEffect,useState}from\"react\";import{useMediaQuery}from\"react-responsive\";import{searchData}from\"../api/fetchData\";import{isScrollable}from\"../utils/common\";import Modals from\"./common/modals\";import EditModal from\"./editModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Management(){const[data,setData]=useState([]);const[parkingName,setParkinName]=useState('');const isPc=useMediaQuery({query:\"(min-width: 990px)\"});const[scrolled,setScrolled]=useState(false);const[isOpen,setIsOpen]=useState(false);const[edit,setEdit]=useState(false);const[editData,setEditData]=useState({});const handleKeyDown=e=>{if(e.key==='Enter'){onClickSearch();}};const onClickSearch=async()=>{const trimmedValue=parkingName.trim();if(trimmedValue){await searchData(trimmedValue).then(result=>setData(result));}};useEffect(()=>{console.log(\"Flag changed:\",isOpen);if(isOpen){document.body.style.overflow='hidden';}else{document.body.style.overflow='auto';}},[isOpen]);useEffect(()=>{console.log(\"Flag changed:\",edit);if(edit){document.body.style.overflow='hidden';}else{document.body.style.overflow='auto';}},[edit]);useEffect(()=>{setScrolled(isScrollable);},[data]);return/*#__PURE__*/_jsxs(\"div\",{className:cn('w-full flex flex-col',{'h-[400px]':!scrolled,'pb-[160px]':scrolled}),children:[/*#__PURE__*/_jsxs(\"div\",{className:cn('flex items-center w-full space-x-4 justify-center',{'text-[10px]':!isPc}),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border w-[300px] h-[40px] flex items-center\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"basis-1/3 h-full flex_center bg-[#eeeeee] w-[60px]\",children:\"\\uD604\\uC7A5\"}),/*#__PURE__*/_jsx(\"input\",{type:'text',className:\"w-full h-full px-2\",placeholder:'현장명을 입력해주세요.',onChange:e=>setParkinName(e.currentTarget.value),onKeyDown:handleKeyDown})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[60px] h-[40px] flex_center border\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full h-full bg_base text-white\",onClick:onClickSearch,children:\"\\uAC80\\uC0C9\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[80px] h-[40px] flex_center border\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full h-full bg_base text-white\",onClick:e=>setIsOpen(!isOpen),children:\"\\uD604\\uC7A5\\uCD94\\uAC00\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full mt-8\",children:data.length>0&&/*#__PURE__*/_jsxs(\"table\",{className:cn('w-full border',{'text-[10px]':!isPc}),children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"h-[40px] bg_base text-white\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border-r\",children:\"\\uCF54\\uB4DC\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border-r\",children:\"\\uD604\\uC7A5\\uBA85\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border-r\",children:\"\\uC601\\uC5C5\\uAD00\\uD560\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC218\\uC815\"})]})}),data.map((location,index)=>/*#__PURE__*/_jsxs(\"tbody\",{className:\"text-black\",children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center h-[60px] border-b\",children:[/*#__PURE__*/_jsx(\"td\",{rowSpan:2,className:\"border-r\",children:location.PJTcode}),/*#__PURE__*/_jsx(\"td\",{className:\"border-r\",children:location.pklName}),/*#__PURE__*/_jsx(\"td\",{className:\"border-r\",children:location.sales_region}),/*#__PURE__*/_jsx(\"td\",{rowSpan:2,children:/*#__PURE__*/_jsx(\"button\",{className:cn(' border text-white bg-[#007bff] rounded-lg',{'h-[28px] w-[40px] text-[9px]':!isPc,'h-[40px] w-[80px]':isPc}),onClick:event=>{setEdit(!edit);setEditData(location);},children:\"\\uC218\\uC815\"})})]}),/*#__PURE__*/_jsx(\"tr\",{className:\"h-[40px] border-b\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:2,className:\"border-r pl-4\",children:location.pklAddress})})]},index))]})}),isOpen&&/*#__PURE__*/_jsx(Modals,{type:'manage',pklName:'',PJTcode:'',setFlag:setIsOpen,flag:isOpen}),edit&&/*#__PURE__*/_jsx(EditModal,{flag:edit,setFlag:setEdit,editData:editData,setData:setData})]});}","map":{"version":3,"names":["cn","React","useEffect","useState","useMediaQuery","searchData","isScrollable","Modals","EditModal","jsx","_jsx","jsxs","_jsxs","Management","data","setData","parkingName","setParkinName","isPc","query","scrolled","setScrolled","isOpen","setIsOpen","edit","setEdit","editData","setEditData","handleKeyDown","e","key","onClickSearch","trimmedValue","trim","then","result","console","log","document","body","style","overflow","className","children","type","placeholder","onChange","currentTarget","value","onKeyDown","onClick","length","map","location","index","rowSpan","PJTcode","pklName","sales_region","event","colSpan","pklAddress","setFlag","flag"],"sources":["D:/IdeaProjects/kmpark/src/components/management.tsx"],"sourcesContent":["import cn from \"classnames\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {Location} from \"../@types/common\";\r\nimport {useMediaQuery} from \"react-responsive\";\r\nimport {searchData} from \"../api/fetchData\";\r\nimport {isScrollable} from \"../utils/common\";\r\nimport Modals from \"./common/modals\";\r\nimport EditModal from \"./editModal\";\r\n\r\nexport default function Management(){\r\n    const [data, setData] = useState<Location[]>([]);\r\n    const [parkingName, setParkinName] = useState('');\r\n    const isPc = useMediaQuery({ query: \"(min-width: 990px)\" });\r\n    const [scrolled, setScrolled] = useState(false);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [edit, setEdit] = useState(false);\r\n    const [editData, setEditData] = useState({});\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter') {\r\n            onClickSearch();\r\n        }\r\n    };\r\n\r\n    const onClickSearch = async () => {\r\n        const trimmedValue = parkingName.trim();\r\n        if (trimmedValue) {\r\n            await searchData(trimmedValue).then((result) => setData(result));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(\"Flag changed:\", isOpen);\r\n        if (isOpen) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'auto';\r\n        }\r\n    }, [isOpen]);\r\n\r\n    useEffect(() => {\r\n        console.log(\"Flag changed:\", edit);\r\n        if (edit) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'auto';\r\n        }\r\n    }, [edit]);\r\n\r\n    useEffect(() => {\r\n        setScrolled(isScrollable);\r\n    }, [data]);\r\n    return(\r\n        <div className={cn('w-full flex flex-col', {'h-[400px]': !scrolled, 'pb-[160px]' : scrolled})}>\r\n            <div className={cn('flex items-center w-full space-x-4 justify-center',{'text-[10px]': !isPc})}>\r\n                <div className='border w-[300px] h-[40px] flex items-center'>\r\n                    <label className='basis-1/3 h-full flex_center bg-[#eeeeee] w-[60px]'>\r\n                        현장\r\n                    </label>\r\n                    <input type={'text'} className='w-full h-full px-2' placeholder={'현장명을 입력해주세요.'}\r\n                           onChange={(e: React.ChangeEvent<HTMLInputElement>) => setParkinName(e.currentTarget.value)}\r\n                           onKeyDown={handleKeyDown}\r\n                    />\r\n                </div>\r\n                <div className='w-[60px] h-[40px] flex_center border'>\r\n                    <button className='w-full h-full bg_base text-white' onClick={onClickSearch}>\r\n                        검색\r\n                    </button>\r\n                </div>\r\n                <div className='w-[80px] h-[40px] flex_center border'>\r\n                    <button className='w-full h-full bg_base text-white' onClick={(e:React.MouseEvent) => setIsOpen(!isOpen)}>\r\n                        현장추가\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className='w-full mt-8'>\r\n                {data.length > 0 && (\r\n                    <table className={cn('w-full border',{'text-[10px]' : !isPc})}>\r\n                        <thead>\r\n                        <tr className='h-[40px] bg_base text-white'>\r\n                            <th className='border-r'>코드</th>\r\n                            <th className='border-r'>현장명</th>\r\n                            <th className='border-r'>영업관할</th>\r\n                            <th>수정</th>\r\n                        </tr>\r\n                        </thead>\r\n                        {data.map((location, index) => (\r\n                            <tbody key={index} className='text-black'>\r\n                            <tr className='text-center h-[60px] border-b'>\r\n                                <td rowSpan={2} className='border-r'>{location.PJTcode}</td>\r\n                                <td className='border-r'>{location.pklName}</td>\r\n                                <td className='border-r'>{location.sales_region}</td>\r\n                                <td rowSpan={2}><button className={cn(' border text-white bg-[#007bff] rounded-lg',{'h-[28px] w-[40px] text-[9px]' : !isPc, 'h-[40px] w-[80px]' : isPc})} onClick={(event :React.MouseEvent<HTMLButtonElement>) => {setEdit(!edit); setEditData(location)}}>수정</button></td>\r\n                            </tr>\r\n                            <tr className='h-[40px] border-b'>\r\n                                <td colSpan={2} className='border-r pl-4'>\r\n                                    {location.pklAddress}\r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        ))}\r\n                    </table>\r\n                )}\r\n            </div>\r\n            {\r\n                isOpen &&\r\n                <Modals type={'manage'} pklName={''} PJTcode={''} setFlag={setIsOpen} flag={isOpen}/>\r\n            }\r\n            {\r\n                edit &&\r\n                <EditModal flag={edit} setFlag={setEdit} editData={editData} setData={setData}/>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}