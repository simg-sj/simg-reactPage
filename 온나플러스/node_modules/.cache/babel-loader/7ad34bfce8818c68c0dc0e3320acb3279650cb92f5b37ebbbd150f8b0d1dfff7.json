{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{sendMessage}from\"../../pages/api/sendMessage\";import Modal from\"react-modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SendButton=_ref=>{let{cell,setCode,isCell}=_ref;const[sendFlag,setSendFlag]=useState(false);const[count,setCount]=useState(0);const[show,setShow]=useState(false);const customStyles={overlay:{backgroundColor:\"rgba(0,0,0,0.5)\"},content:{left:\"50%\",margin:\"auto\",width:\"350px\",height:\"200px\",padding:\"0\",overflow:\"hidden\",transform:\"translate(-50%,0)\"}};const onClickHandler=e=>{sendMessage(cell).then(res=>{setCode(res.code);setCount(count+1);setShow(true);setSendFlag(false);setTimeout(()=>{setSendFlag(true);},10000);}).catch(error=>{alert(error.msg);});};useEffect(()=>{if(isCell){setSendFlag(true);}else{setSendFlag(false);}},[isCell]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:sendFlag?'button_on':'button_off',onClick:onClickHandler,disabled:!sendFlag,children:count===0?'인증번호 전송':'인증번호 재전송'}),show&&/*#__PURE__*/_jsxs(Modal,{isOpen:show,style:customStyles,children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b bg-[#f6fbf7] border-b-[#157b4b] font-bold\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-2\",children:\"\\uC778\\uC99D\\uBC88\\uD638 \\uBC1C\\uC1A1 \\uC644\\uB8CC\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC778\\uC99D\\uBC88\\uD638\\uAC00 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uBC1C\\uC1A1\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-0 w-full flex justify-center py-2\",children:/*#__PURE__*/_jsx(\"button\",{id:'confirm',className:\"button_on\",onClick:e=>setShow(false),children:\"\\uD655\\uC778\"})})]})]});};export default SendButton;","map":{"version":3,"names":["React","useEffect","useState","sendMessage","Modal","jsx","_jsx","jsxs","_jsxs","SendButton","_ref","cell","setCode","isCell","sendFlag","setSendFlag","count","setCount","show","setShow","customStyles","overlay","backgroundColor","content","left","margin","width","height","padding","overflow","transform","onClickHandler","e","then","res","code","setTimeout","catch","error","alert","msg","children","className","onClick","disabled","isOpen","style","id"],"sources":["C:/Users/김기덕/IdeaProjects/connect_onna/src/components/atoms/sendButton.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { sendMessage } from \"../../pages/api/sendMessage\";\r\nimport { randomCode } from \"../util/common\";\r\nimport Modal from \"react-modal\";\r\ntype sendParam = {\r\n    code : string,\r\n    cell : string\r\n}\r\ninterface CellProps {\r\n    cell : string,\r\n    setCode : React.Dispatch<React.SetStateAction<string>>,\r\n    isCell : boolean\r\n}\r\nconst SendButton = ({cell, setCode, isCell} : CellProps) => {\r\n    const [sendFlag, setSendFlag] = useState<boolean>(false);\r\n    const [count, setCount] = useState<number>(0);\r\n    const [show, setShow] = useState<boolean>(false);\r\n    const customStyles = {\r\n        overlay: {\r\n            backgroundColor: \"rgba(0,0,0,0.5)\",\r\n        },\r\n        content: {\r\n            left: \"50%\",\r\n            margin: \"auto\",\r\n            width: \"350px\",\r\n            height: \"200px\",\r\n            padding: \"0\",\r\n            overflow: \"hidden\",\r\n            transform : \"translate(-50%,0)\"\r\n        },\r\n    };\r\n    const onClickHandler = (e : React.MouseEvent<HTMLElement>) => {\r\n         sendMessage(cell)\r\n            .then((res : any) => {\r\n                setCode(res.code);\r\n                setCount(count+1);\r\n                setShow(true);\r\n                setSendFlag(false);\r\n                setTimeout(() => {\r\n                    setSendFlag(true);\r\n                }, 10000);\r\n            }).catch((error) => {\r\n                alert(error.msg);\r\n         })\r\n    }\r\n    useEffect(() => {\r\n        if(isCell){\r\n            setSendFlag(true);\r\n        }else {\r\n            setSendFlag(false);\r\n        }\r\n    }, [isCell]);\r\n    return (\r\n        <div>\r\n            <button className={sendFlag ? 'button_on' : 'button_off'} onClick={onClickHandler} disabled={!sendFlag}>{ count === 0 ? '인증번호 전송' : '인증번호 재전송'}</button>\r\n            {\r\n                  show &&\r\n                <Modal isOpen={show} style={customStyles}>\r\n                    <div className='border-b bg-[#f6fbf7] border-b-[#157b4b] font-bold'>\r\n                        <div className='flex justify-center py-2'>\r\n                            인증번호 발송 완료\r\n                        </div>\r\n                    </div>\r\n                    <div className='flex justify-center mt-8'>\r\n                        <h2>\r\n                            인증번호가 정상적으로 발송되었습니다.\r\n                        </h2>\r\n                    </div>\r\n                    <div className='fixed bottom-0 w-full flex justify-center py-2'>\r\n                        <button id={'confirm'} className='button_on' onClick={(e:React.MouseEvent<HTMLElement>)=>setShow(false)}>확인</button>\r\n                    </div>\r\n                </Modal>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default SendButton;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}