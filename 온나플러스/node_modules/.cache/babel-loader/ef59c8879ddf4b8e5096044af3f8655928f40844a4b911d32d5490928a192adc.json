{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{sendMessage}from\"../../pages/api/sendMessage\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";const SendButton=_ref=>{let{cell,setCode,isCell}=_ref;const[sendFlag,setSendFlag]=useState(false);const[count,setCount]=useState(0);const[show,setShow]=useState(false);const dispatch=useDispatch();const customStyles={overlay:{backgroundColor:\"rgba(0,0,0,0.5)\"},content:{left:\"50%\",margin:\"auto\",width:\"350px\",height:\"200px\",padding:\"0\",overflow:\"hidden\",transform:\"translate(-50%,0)\"}};const onClickHandler=e=>{sendMessage(cell).then(res=>{setCode(res.code);setCount(count+1);setShow(true);setSendFlag(false);alert('입력하신 번호로 인증번호를 발송했습니다.');setTimeout(()=>{setSendFlag(true);},10000);}).catch(error=>{alert(error.msg);});};useEffect(()=>{if(isCell){setSendFlag(true);}else{setSendFlag(false);}},[isCell]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:sendFlag?'button_on':'button_off',onClick:onClickHandler,disabled:!sendFlag,children:count===0?'인증번호 전송':'인증번호 재전송'})});};export default SendButton;","map":{"version":3,"names":["React","useEffect","useState","sendMessage","useDispatch","jsx","_jsx","SendButton","_ref","cell","setCode","isCell","sendFlag","setSendFlag","count","setCount","show","setShow","dispatch","customStyles","overlay","backgroundColor","content","left","margin","width","height","padding","overflow","transform","onClickHandler","e","then","res","code","alert","setTimeout","catch","error","msg","children","className","onClick","disabled"],"sources":["C:/Users/김기덕/IdeaProjects/connect_onna/src/components/atoms/sendButton.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { sendMessage } from \"../../pages/api/sendMessage\";\r\nimport { randomCode } from \"../util/common\";\r\nimport Modal from \"react-modal\";\r\nimport {useDispatch} from \"react-redux\";\r\ntype sendParam = {\r\n    code : string,\r\n    cell : string\r\n}\r\ninterface CellProps {\r\n    cell : string,\r\n    setCode : React.Dispatch<React.SetStateAction<string>>,\r\n    isCell : boolean\r\n}\r\nconst SendButton = ({cell, setCode, isCell} : CellProps) => {\r\n    const [sendFlag, setSendFlag] = useState<boolean>(false);\r\n    const [count, setCount] = useState<number>(0);\r\n    const [show, setShow] = useState<boolean>(false);\r\n    const dispatch = useDispatch();\r\n    const customStyles = {\r\n        overlay: {\r\n            backgroundColor: \"rgba(0,0,0,0.5)\",\r\n        },\r\n        content: {\r\n            left: \"50%\",\r\n            margin: \"auto\",\r\n            width: \"350px\",\r\n            height: \"200px\",\r\n            padding: \"0\",\r\n            overflow: \"hidden\",\r\n            transform : \"translate(-50%,0)\"\r\n        },\r\n    };\r\n    const onClickHandler = (e : React.MouseEvent<HTMLElement>) => {\r\n         sendMessage(cell)\r\n            .then((res : any) => {\r\n                setCode(res.code);\r\n                setCount(count+1);\r\n                setShow(true);\r\n                setSendFlag(false);\r\n                alert('입력하신 번호로 인증번호를 발송했습니다.');\r\n                setTimeout(() => {\r\n                    setSendFlag(true);\r\n                }, 10000);\r\n            }).catch((error) => {\r\n                alert(error.msg);\r\n         })\r\n    }\r\n    useEffect(() => {\r\n        if(isCell){\r\n            setSendFlag(true);\r\n        }else {\r\n            setSendFlag(false);\r\n        }\r\n    }, [isCell]);\r\n    return (\r\n        <div>\r\n            <button className={sendFlag ? 'button_on' : 'button_off'} onClick={onClickHandler} disabled={!sendFlag}>{ count === 0 ? '인증번호 전송' : '인증번호 재전송'}</button>\r\n            {/*{\r\n                  show &&\r\n                <Modal isOpen={show} style={customStyles}>\r\n                    <div className='border-b bg-[#f6fbf7] border-b-[#157b4b] font-bold'>\r\n                        <div className='flex justify-center py-2'>\r\n                            인증번호 발송 완료\r\n                        </div>\r\n                    </div>\r\n                    <div className='flex justify-center mt-8'>\r\n                        <h2>\r\n                            인증번호가 정상적으로 발송되었습니다.\r\n                        </h2>\r\n                    </div>\r\n                    <div className='fixed bottom-0 w-full flex justify-center py-2'>\r\n                        <button id={'confirm'} className='button_on' onClick={(e:React.MouseEvent<HTMLElement>)=>setShow(false)}>확인</button>\r\n                    </div>\r\n                </Modal>\r\n            }*/}\r\n        </div>\r\n    )\r\n}\r\nexport default SendButton;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,OAASC,WAAW,KAAQ,6BAA6B,CAGzD,OAAQC,WAAW,KAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAUxC,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAyC,IAAxC,CAACC,IAAI,CAAEC,OAAO,CAAEC,MAAkB,CAAC,CAAAH,IAAA,CACnD,KAAM,CAACI,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAU,KAAK,CAAC,CACxD,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAS,CAAC,CAAC,CAC7C,KAAM,CAACc,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAU,KAAK,CAAC,CAChD,KAAM,CAAAgB,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAe,YAAY,CAAG,CACjBC,OAAO,CAAE,CACLC,eAAe,CAAE,iBACrB,CAAC,CACDC,OAAO,CAAE,CACLC,IAAI,CAAE,KAAK,CACXC,MAAM,CAAE,MAAM,CACdC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,GAAG,CACZC,QAAQ,CAAE,QAAQ,CAClBC,SAAS,CAAG,mBAChB,CACJ,CAAC,CACD,KAAM,CAAAC,cAAc,CAAIC,CAAiC,EAAK,CACzD5B,WAAW,CAACM,IAAI,CAAC,CACbuB,IAAI,CAAEC,GAAS,EAAK,CACjBvB,OAAO,CAACuB,GAAG,CAACC,IAAI,CAAC,CACjBnB,QAAQ,CAACD,KAAK,CAAC,CAAC,CAAC,CACjBG,OAAO,CAAC,IAAI,CAAC,CACbJ,WAAW,CAAC,KAAK,CAAC,CAClBsB,KAAK,CAAC,wBAAwB,CAAC,CAC/BC,UAAU,CAAC,IAAM,CACbvB,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,CAAE,KAAK,CAAC,CACb,CAAC,CAAC,CAACwB,KAAK,CAAEC,KAAK,EAAK,CAChBH,KAAK,CAACG,KAAK,CAACC,GAAG,CAAC,CACvB,CAAC,CAAC,CACP,CAAC,CACDtC,SAAS,CAAC,IAAM,CACZ,GAAGU,MAAM,CAAC,CACNE,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,IAAK,CACFA,WAAW,CAAC,KAAK,CAAC,CACtB,CACJ,CAAC,CAAE,CAACF,MAAM,CAAC,CAAC,CACZ,mBACIL,IAAA,QAAAkC,QAAA,cACIlC,IAAA,WAAQmC,SAAS,CAAE7B,QAAQ,CAAG,WAAW,CAAG,YAAa,CAAC8B,OAAO,CAAEZ,cAAe,CAACa,QAAQ,CAAE,CAAC/B,QAAS,CAAA4B,QAAA,CAAG1B,KAAK,GAAK,CAAC,CAAG,SAAS,CAAG,UAAU,CAAS,CAAC,CAmBvJ,CAAC,CAEd,CAAC,CACD,cAAe,CAAAP,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}