{"ast":null,"code":"import axios from 'axios';\n\n/** Axios Response 데이터 형식\r\n *  config : 요청에 대한 axios 구성 설정\r\n *  data 서버가 제공한 응답 데이터\r\n *  headers : 헤더 정보\r\n *  request : 요청\r\n *  status : 응답 HTTP 상태 코드\r\n *  statusText : 응답 HTTP 상태 메시지\r\n */\n\n// 본인 서버에서 내려주는 응답 구조\n\n// 테스트\n/*const baseUrl : any = process.env.REACT_APP_BASE_TEST_JOIN;*/ //운영 계\nconst baseUrl = process.env.REACT_APP_BASE_JOIN;\nexport async function sendJoin(param) {\n  let apiKey = '';\n  // 테스트\n  /*if(param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ONNA;\r\n  if(param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ENURI;\r\n  if(param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_BARICO;\r\n  if(param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_NONE;*/\n\n  // 운영계\n  if (param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_ONNA;\n  if (param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_ENURI;\n  if (param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_BARICO;\n  if (param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_NONE;\n  try {\n    const res = await axios.post(baseUrl, param, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'X-API-SECRET': apiKey\n      }\n    });\n    if (res.status === 200) {\n      if (res.data[0].rCnt > 0) {\n        return {\n          status: res.status\n        };\n      } else {\n        return {\n          status: '107',\n          msg: res.data[0].msg\n        };\n      }\n    }\n  } catch (error) {\n    return {\n      status: error,\n      msg: '서버오류 : [ 1877-3006 ] 고객센터에 문의바랍니다.'\n    };\n  }\n}\nexport async function calcPremium(param) {\n  let apiKey = '';\n  // 테스트\n  /*if(param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ONNA;\r\n  if(param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ENURI;\r\n  if(param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_BARICO;\r\n  if(param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_NONE;*/\n\n  // 운영계\n  if (param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_ONNA;\n  if (param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_ENURI;\n  if (param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_BARICO;\n  if (param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_NONE;\n  try {\n    const res = await axios.post(baseUrl + '/premiumsCheck', param, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'X-API-SECRET': apiKey\n      }\n    });\n    if (res.status === 200) {\n      if (res.data.rCnt > 0) {\n        return {\n          status: res.status,\n          defaultpremiums: res.data.defaultpremiums,\n          highpremiums: res.data.highpremiums\n        };\n      } else {\n        return {\n          status: '107',\n          msg: res.data.msg\n        };\n      }\n    }\n  } catch (error) {\n    return {\n      status: error,\n      msg: '서버오류 : [ 1877-3006 ] 고객센터에 문의바랍니다.'\n    };\n  }\n}","map":{"version":3,"names":["axios","baseUrl","process","env","REACT_APP_BASE_JOIN","sendJoin","param","apiKey","bpk","REACT_APP_X_API_SECRET_ONNA","REACT_APP_X_API_SECRET_ENURI","REACT_APP_X_API_SECRET_BARICO","REACT_APP_X_API_SECRET_NONE","res","post","headers","status","data","rCnt","msg","error","calcPremium","defaultpremiums","highpremiums"],"sources":["C:/Users/김기덕/IdeaProjects/connect_onna/src/pages/api/sendJoin.tsx"],"sourcesContent":["import axios, {AxiosResponseHeaders, InternalAxiosRequestConfig, RawAxiosResponseHeaders,} from 'axios'\r\nimport {useDispatch} from \"react-redux\";\r\n/** Axios Response 데이터 형식\r\n *  config : 요청에 대한 axios 구성 설정\r\n *  data 서버가 제공한 응답 데이터\r\n *  headers : 헤더 정보\r\n *  request : 요청\r\n *  status : 응답 HTTP 상태 코드\r\n *  statusText : 응답 HTTP 상태 메시지\r\n */\r\nimport {InfoProps} from \"../../components/atoms/inputs/carNumInput\";\r\n\r\n// 본인 서버에서 내려주는 응답 구조\r\ninterface AxiosResponse<T = any, D = any> {\r\n    data: T\r\n    rCnt : number\r\n    status: number\r\n    highpremiums : string,\r\n    defaultpremiums : string,\r\n    statusText: string\r\n    headers: RawAxiosResponseHeaders | AxiosResponseHeaders\r\n    config: InternalAxiosRequestConfig<D>\r\n    request?: any\r\n    msg : any\r\n    0 : any\r\n    res : any\r\n}\r\ninterface ParamProps {\r\n    cName : string,\r\n    bpk : string,\r\n    cJumin : string,\r\n    cCheck : boolean,\r\n    cCell : string\r\n}\r\n\r\ninterface CalcProps {\r\n    bpk : string,\r\n    age : string\r\n}\r\n// 테스트\r\n/*const baseUrl : any = process.env.REACT_APP_BASE_TEST_JOIN;*/\r\n//운영 계\r\nconst baseUrl : any = process.env.REACT_APP_BASE_JOIN;\r\nexport async function sendJoin(param : ParamProps )  {\r\n    let apiKey : any = '';\r\n    // 테스트\r\n    /*if(param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ONNA;\r\n    if(param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ENURI;\r\n    if(param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_BARICO;\r\n    if(param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_NONE;*/\r\n\r\n    // 운영계\r\n    if(param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_ONNA;\r\n    if(param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_ENURI;\r\n    if(param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_BARICO;\r\n    if(param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_NONE;\r\n    try {\r\n        const res = await axios.post<AxiosResponse<any>>(baseUrl, param,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                    'X-API-SECRET' : apiKey\r\n                }\r\n            });\r\n        if (res.status === 200) {\r\n            if(res.data[0].rCnt > 0) {\r\n                return {status : res.status};\r\n            }else {\r\n                return {status : '107', msg  : res.data[0].msg};\r\n            }\r\n        }\r\n    } catch (error) {\r\n        return {status : error , msg : '서버오류 : [ 1877-3006 ] 고객센터에 문의바랍니다.'};\r\n    }\r\n}\r\n\r\nexport async function calcPremium(param : CalcProps) {\r\n    let apiKey : any = '';\r\n    // 테스트\r\n    /*if(param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ONNA;\r\n    if(param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_ENURI;\r\n    if(param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_BARICO;\r\n    if(param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_TEST_NONE;*/\r\n\r\n    // 운영계\r\n    if(param.bpk === 'onna') apiKey = process.env.REACT_APP_X_API_SECRET_ONNA;\r\n    if(param.bpk === 'enuri') apiKey = process.env.REACT_APP_X_API_SECRET_ENURI;\r\n    if(param.bpk === 'barico') apiKey = process.env.REACT_APP_X_API_SECRET_BARICO;\r\n    if(param.bpk === 'none') apiKey = process.env.REACT_APP_X_API_SECRET_NONE;\r\n\r\n    try {\r\n        const res = await axios.post<AxiosResponse<any>>(baseUrl+'/premiumsCheck', param,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                    'X-API-SECRET' : apiKey\r\n                }\r\n            });\r\n        if (res.status === 200) {\r\n            if(res.data.rCnt > 0) {\r\n                return {status : res.status, defaultpremiums : res.data.defaultpremiums, highpremiums : res.data.highpremiums};\r\n            }else {\r\n                return {status : '107', msg  : res.data.msg};\r\n            }\r\n        }\r\n    } catch (error) {\r\n        return {status : error , msg : '서버오류 : [ 1877-3006 ] 고객센터에 문의바랍니다.'};\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}